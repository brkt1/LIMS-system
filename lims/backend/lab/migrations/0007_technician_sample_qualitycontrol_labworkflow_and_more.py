# Generated by Django 5.2.3 on 2025-09-27 17:37

import django.db.models.deletion
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        ('lab', '0006_supportmessage_is_auto_generated_and_more'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='Technician',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('employee_id', models.CharField(max_length=50, unique=True)),
                ('specialization', models.CharField(choices=[('clinical_chemistry', 'Clinical Chemistry'), ('hematology', 'Hematology'), ('microbiology', 'Microbiology'), ('immunology', 'Immunology'), ('pathology', 'Pathology'), ('molecular_biology', 'Molecular Biology'), ('cytology', 'Cytology'), ('blood_bank', 'Blood Bank'), ('general', 'General Laboratory')], default='general', max_length=50)),
                ('certification_level', models.CharField(choices=[('certified', 'Certified Medical Laboratory Technician (MLT)'), ('specialist', 'Medical Laboratory Specialist (MLS)'), ('technologist', 'Medical Laboratory Technologist (MLT)'), ('supervisor', 'Laboratory Supervisor'), ('director', 'Laboratory Director')], default='certified', max_length=50)),
                ('years_experience', models.PositiveIntegerField(default=0)),
                ('license_number', models.CharField(blank=True, max_length=100, null=True)),
                ('license_expiry', models.DateField(blank=True, null=True)),
                ('phone', models.CharField(blank=True, max_length=20, null=True)),
                ('emergency_contact', models.CharField(blank=True, max_length=100, null=True)),
                ('emergency_phone', models.CharField(blank=True, max_length=20, null=True)),
                ('status', models.CharField(choices=[('active', 'Active'), ('inactive', 'Inactive'), ('on_leave', 'On Leave'), ('terminated', 'Terminated')], default='active', max_length=20)),
                ('hire_date', models.DateField()),
                ('notes', models.TextField(blank=True, null=True)),
                ('tenant_id', models.CharField(blank=True, max_length=100, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('total_tests_processed', models.PositiveIntegerField(default=0)),
                ('average_processing_time', models.DurationField(blank=True, null=True)),
                ('quality_score', models.DecimalField(decimal_places=2, default=0.0, max_digits=5)),
                ('user', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='technician_profile', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'ordering': ['user__last_name', 'user__first_name'],
            },
        ),
        migrations.CreateModel(
            name='Sample',
            fields=[
                ('id', models.CharField(max_length=50, primary_key=True, serialize=False)),
                ('patient_id', models.CharField(max_length=50)),
                ('test_request_id', models.CharField(blank=True, max_length=50, null=True)),
                ('sample_type', models.CharField(choices=[('blood', 'Blood'), ('urine', 'Urine'), ('tissue', 'Tissue'), ('swab', 'Swab'), ('fluid', 'Body Fluid'), ('stool', 'Stool'), ('sputum', 'Sputum'), ('other', 'Other')], max_length=20)),
                ('collection_date', models.DateTimeField()),
                ('received_date', models.DateTimeField(blank=True, null=True)),
                ('status', models.CharField(choices=[('collected', 'Collected'), ('received', 'Received in Lab'), ('processing', 'Processing'), ('analyzed', 'Analyzed'), ('completed', 'Completed'), ('rejected', 'Rejected'), ('expired', 'Expired')], default='collected', max_length=20)),
                ('priority', models.CharField(choices=[('routine', 'Routine'), ('urgent', 'Urgent'), ('stat', 'STAT'), ('emergency', 'Emergency')], default='routine', max_length=20)),
                ('volume', models.DecimalField(blank=True, decimal_places=2, max_digits=8, null=True)),
                ('container_type', models.CharField(blank=True, max_length=100, null=True)),
                ('storage_conditions', models.CharField(blank=True, max_length=200, null=True)),
                ('expiry_date', models.DateTimeField(blank=True, null=True)),
                ('collection_notes', models.TextField(blank=True, null=True)),
                ('processing_notes', models.TextField(blank=True, null=True)),
                ('rejection_reason', models.TextField(blank=True, null=True)),
                ('tenant_id', models.CharField(blank=True, max_length=100, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('technician', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='samples', to='lab.technician')),
            ],
            options={
                'ordering': ['-collection_date'],
            },
        ),
        migrations.CreateModel(
            name='QualityControl',
            fields=[
                ('id', models.CharField(max_length=50, primary_key=True, serialize=False)),
                ('test_name', models.CharField(max_length=200)),
                ('qc_type', models.CharField(choices=[('internal', 'Internal QC'), ('external', 'External QC'), ('proficiency', 'Proficiency Testing'), ('calibration', 'Calibration')], max_length=20)),
                ('lot_number', models.CharField(blank=True, max_length=100, null=True)),
                ('expected_value', models.DecimalField(blank=True, decimal_places=4, max_digits=10, null=True)),
                ('actual_value', models.DecimalField(blank=True, decimal_places=4, max_digits=10, null=True)),
                ('acceptable_range_min', models.DecimalField(blank=True, decimal_places=4, max_digits=10, null=True)),
                ('acceptable_range_max', models.DecimalField(blank=True, decimal_places=4, max_digits=10, null=True)),
                ('status', models.CharField(choices=[('pending', 'Pending'), ('passed', 'Passed'), ('failed', 'Failed'), ('warning', 'Warning')], default='pending', max_length=20)),
                ('equipment_id', models.CharField(blank=True, max_length=50, null=True)),
                ('performed_date', models.DateTimeField()),
                ('notes', models.TextField(blank=True, null=True)),
                ('corrective_action', models.TextField(blank=True, null=True)),
                ('tenant_id', models.CharField(blank=True, max_length=100, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('technician', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='qc_records', to='lab.technician')),
            ],
            options={
                'ordering': ['-performed_date'],
            },
        ),
        migrations.CreateModel(
            name='LabWorkflow',
            fields=[
                ('id', models.CharField(max_length=50, primary_key=True, serialize=False)),
                ('workflow_type', models.CharField(choices=[('sample_processing', 'Sample Processing'), ('equipment_maintenance', 'Equipment Maintenance'), ('quality_control', 'Quality Control'), ('calibration', 'Calibration'), ('inventory', 'Inventory Management'), ('training', 'Training')], max_length=30)),
                ('title', models.CharField(max_length=200)),
                ('description', models.TextField(blank=True, null=True)),
                ('status', models.CharField(choices=[('pending', 'Pending'), ('in_progress', 'In Progress'), ('completed', 'Completed'), ('cancelled', 'Cancelled'), ('on_hold', 'On Hold')], default='pending', max_length=20)),
                ('priority', models.CharField(choices=[('routine', 'Routine'), ('urgent', 'Urgent'), ('stat', 'STAT'), ('emergency', 'Emergency')], default='routine', max_length=20)),
                ('due_date', models.DateTimeField(blank=True, null=True)),
                ('completed_date', models.DateTimeField(blank=True, null=True)),
                ('estimated_duration', models.DurationField(blank=True, null=True)),
                ('actual_duration', models.DurationField(blank=True, null=True)),
                ('notes', models.TextField(blank=True, null=True)),
                ('tenant_id', models.CharField(blank=True, max_length=100, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('assigned_to', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='assigned_workflows', to='lab.technician')),
            ],
            options={
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='TestResult',
            fields=[
                ('id', models.CharField(max_length=50, primary_key=True, serialize=False)),
                ('test_name', models.CharField(max_length=200)),
                ('test_code', models.CharField(blank=True, max_length=50, null=True)),
                ('result_type', models.CharField(choices=[('quantitative', 'Quantitative'), ('qualitative', 'Qualitative'), ('text', 'Text'), ('image', 'Image'), ('file', 'File')], default='quantitative', max_length=20)),
                ('result_value', models.TextField(blank=True, null=True)),
                ('result_unit', models.CharField(blank=True, max_length=50, null=True)),
                ('reference_range', models.CharField(blank=True, max_length=200, null=True)),
                ('status', models.CharField(choices=[('pending', 'Pending'), ('in_progress', 'In Progress'), ('completed', 'Completed'), ('reviewed', 'Reviewed by Doctor'), ('approved', 'Approved'), ('rejected', 'Rejected')], default='pending', max_length=20)),
                ('equipment_used_id', models.CharField(blank=True, max_length=50, null=True)),
                ('analysis_date', models.DateTimeField(blank=True, null=True)),
                ('completion_date', models.DateTimeField(blank=True, null=True)),
                ('reviewed_by_id', models.CharField(blank=True, max_length=50, null=True)),
                ('review_date', models.DateTimeField(blank=True, null=True)),
                ('review_notes', models.TextField(blank=True, null=True)),
                ('is_abnormal', models.BooleanField(default=False)),
                ('critical_value', models.BooleanField(default=False)),
                ('technician_notes', models.TextField(blank=True, null=True)),
                ('quality_control_passed', models.BooleanField(default=True)),
                ('tenant_id', models.CharField(blank=True, max_length=100, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('sample', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='test_results', to='lab.sample')),
                ('technician', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='test_results', to='lab.technician')),
            ],
            options={
                'ordering': ['-analysis_date'],
            },
        ),
    ]
